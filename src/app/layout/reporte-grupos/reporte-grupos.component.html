<div class="p-6">
  <mat-card class="shadow-xl rounded-lg">
    <mat-card-header class="pb-4">
      <mat-card-title class="text-2xl font-bold text-gray-800">
        Reporte de Asistencia (Nivel 2)
      </mat-card-title>
      <mat-card-subtitle class="text-gray-500">
        Conferencia: {{ conferenciaTitulo }}
      </mat-card-subtitle>
      <a mat-stroked-button routerLink="/panel/admin/reporte-asistencia" class="ml-auto">
        <mat-icon>arrow_back</mat-icon>
        Regresar a Conferencias
      </a>
    </mat-card-header>

    <mat-card-content class="pt-4">
      
      <div *ngIf="isLoading" class="flex justify-center items-center py-8">
        <mat-spinner diameter="40"></mat-spinner>
      </div>

      <div *ngIf="errorMessage" class="p-4 bg-red-100 text-red-700">
        {{ errorMessage }}
      </div>

      <div *ngIf="!isLoading && !errorMessage" class="overflow-x-auto">
        <table mat-table [dataSource]="reporteGrupos" class="w-full">
          
          <ng-container matColumnDef="grupo">
            <th mat-header-cell *matHeaderCellDef> Grupo </th>
            <td mat-cell *matCellDef="let grupo"> {{ grupo.NOMBRE_GRUPO }} </td>
          </ng-container>

          <ng-container matColumnDef="docente">
            <th mat-header-cell *matHeaderCellDef> Docente a Cargo </th>
            <td mat-cell *matCellDef="let grupo"> {{ grupo.DOCENTE_NOMBRE }} </td>
          </ng-container>

          <ng-container matColumnDef="resumen">
            <th mat-header-cell *matHeaderCellDef> Asistencia </th>
            <td mat-cell *matCellDef="let grupo" [ngClass]="{
              'text-green-600 font-semibold': grupo.TOTAL_ASISTENCIAS === grupo.TOTAL_ALUMNOS,
              'text-red-600': grupo.TOTAL_ASISTENCIAS === 0
            }">
              {{ grupo.TOTAL_ASISTENCIAS }} de {{ grupo.TOTAL_ALUMNOS }}
            </td>
          </ng-container>

          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef> Acciones </th>
            <td mat-cell *matCellDef="let grupo">
              <a mat-icon-button color="primary" 
                 [routerLink]="['/panel/admin/reporte-alumnos', idConferencia, grupo.ID_GRUPO]"
                 aria-label="Ver detalle de alumnos">
                <mat-icon>visibility</mat-icon>
              </a>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          
        </table>
      </div>

    </mat-card-content>
  </mat-card>
</div>